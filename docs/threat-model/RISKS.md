# Risk Register

Оценка рисков по шкале:
- **L (Likelihood)**: 1–5 (1 = маловероятно, 5 = почти неизбежно)
- **I (Impact)**: 1–5 (1 = низкое, 5 = критическое нарушение безопасности/доверия)
- **Risk = L × I**

| RiskID | Описание                                      | Связь (F/NFR)      | L | I | Risk | Стратегия | Владелец   | Срок    | Критерий закрытия                                  |
|--------|-----------------------------------------------|--------------------|---|---|------|-----------|------------|---------|----------------------------------------------------|
| R1     | Брутфорс/флуд голосований                     | F1, NFR-08         | 4 | 4 | 16   | Снизить   | @Stars007z | 2025-10 | Rate-limit middleware включён в CI и протестирован |
| R2     | Повторное голосование                         | F1→F5, NFR-01      | 3 | 5 | 15   | Снизить   | @Stars007z  | 2025-10 | Уникальный индекс в БД + e2e-тест пройден          |
| R3     | Утечка внутренних ошибок (stack trace)        | F3, NFR-03         | 2 | 5 | 10   | Снизить   | @Stars007z  | 2025-10 | Все 4xx/5xx — RFC7807, без деталей                 |
| R4     | SQL-инъекция через feature_id                 | F5, NFR-05         | 1 | 5 | 5    | Снизить   | @Stars007z  | 2025-10 | SAST (Trivy) — 0 критических уязвимостей           |
| R5     | Некорректные входные данные (user_id строка)  | F1, NFR-02         | 4 | 3 | 12   | Снизить   | @Stars007z  | 2025-10 | Pydantic валидация + контракт-тест (422 status)    |
| R6     | Отсутствие алертов при аномальном голосовании | F7, NFR-07         | 3 | 3 | 9    | Снизить   | @Stars007z   | 2025-11 | Алерт в Grafana при >10 голосов/сек от одного ID   |
| R7     | Утечка PII через логи                         | F7, NFR-03         | 2 | 4 | 8    | Снизить   | @Stars007z  | 2025-10 | Логи содержат только user_id и feature_id          |
| R8     | Избыточные HTTP-заголовки раскрывают стек     | F8/F9, NFR-03      | 2 | 3 | 6    | Снизить   | @Stars007z  | 2025-10 | ZAP baseline scan — 0 предупреждений               |
| R9     | Уязвимости в зависимостях (fastapi, sqlalchemy)| build, NFR-06      | 3 | 5 | 15   | Снизить   | @Stars007z  | 2025-10 | Dependabot включён, Trivy в CI, критические — ≤7 дн|
| R10    | Прямой доступ к БД извне                      | DB, NFR-05         | 1 | 5 | 5    | Избежать  | @Stars007z   | 2025-10 | БД в приватной сети, ingress только через приложение|
| R11    | Разведка через 404-ошибки                     | F3, NFR-03         | 2 | 3 | 6    | Снизить   | @Stars007z  | 2025-10 | Все 404 — одинаковый ответ, без различий            |
| R12    | Нарушение целостности vote_count              | F5, NFR-01         | 2 | 4 | 8    | Снизить   | @Stars007z  | 2025-10 | e2e-тест на атомарность голосования                |
